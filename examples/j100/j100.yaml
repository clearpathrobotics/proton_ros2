nodes:
  - name: pc
    transport:
      type: serial
      device: /tmp/ttyPC
  - name: mcu
    transport:
      type: serial
      device: /tmp/ttyMCU
bundles:
  - name: log
    id: 0x100
    producer: mcu
    consumer: pc
    signals:
      - {name: level, type: uint32}
      - {name: name, type: string, capacity: 64}
      - {name: msg, type: string, capacity: 64}
      - {name: file, type: string, capacity: 64}
      - {name: function, type: string, capacity: 64}
      - {name: line, type: uint32}
  - name: status
    id: 0x101
    producer: mcu
    consumer: pc
    signals:
      - {name: hardware_id, type: string, capacity: 10}
      - {name: firmware_version, type: string, capacity: 10}
      - {name: mcu_uptime_s, type: uint32}
      - {name: mcu_uptime_ns, type: uint32}
      - {name: connection_uptime_s, type: uint32}
      - {name: connection_uptime_ns, type: uint32}
  - name: power
    id: 0x102
    producer: mcu
    consumer: pc
    signals:
      - {name: measured_voltages, type: float, length: 3}
      - {name: measured_currents, type: float, length: 4}
  - name: emergency_stop
    id: 0x103
    producer: mcu
    consumer: pc
    signals:
      - {name: stopped, type: bool}
  - name: temperature
    id: 0x104
    producer: mcu
    consumer: pc
    signals:
      - {name: temperatures, type: float, length: 2}
  - name: stop_status
    id: 0x105
    producer: mcu
    consumer: pc
    signals:
      - {name: external_stop_present, type: bool}
  - name: imu
    id: 0x106
    producer: mcu
    consumer: pc
    signals:
      - {name: frame_id, type: string, capacity: 16}
      - {name: linear_acceleration, type: double, length: 3}
      - {name: angular_velocity, type: double, length: 3}
    ros2:
      message: sensor_msgs/msg/Imu
      topic: sensors/imu_0/data_raw
  - name: magnetometer
    id: 0x107
    producer: mcu
    consumer: pc
    signals:
      - {name: frame_id, type: string, capacity: 16}
      - {name: magnetic_field, type: double, length: 3}
    ros2:
      message: sensor_msgs/msg/MagneticField
      topic: sensors/imu_0/mag
  - name: nmea
    id: 0x108
    producer: mcu
    consumer: pc
    signals:
      - {name: frame_id, type: string, capacity: 16}
      - {name: sentence, type: string, capacity: 324}
  - name: motor_feedback
    id: 0x109
    producer: mcu
    consumer: pc
    signals:
      - {name: current, type: float, length: 2}
      - {name: bridge_temperature, type: float, length: 2}
      - {name: motor_temperature, type: float, length: 2}
      - {name: driver_fault, type: bool, length: 2}
      - {name: duty_cycle, type: float, length: 2}
      - {name: measured_velocity, type: float, length: 2}
      - {name: measured_travel, type: float, length: 2}
      - {name: commanded_mode, type: int32}
      - {name: actual_mode, type: int32}
    ros2:
      message: clearpath_platform_msgs/msg/Feedback
      topic: platform/motors/feedback

  - name: wifi_connected
    id: 0x200
    producer: pc
    consumer: mcu
    signals:
      - {name: connected, type: bool}
  - name: hmi
    id: 0x201
    producer: pc
    consumer: mcu
    signals:
      - {name: state, type: uint32}
  - name: motor_command
    id: 0x202
    producer: pc
    consumer: mcu
    signals:
      - {name: mode, type: int32}
      - {name: command, type: float, length: 2}
