nodes:
  - name: pc
    transport:
      type: udp4
      ip: 127.0.0.1
      port: 11417
  - name: mcu
    transport:
      type: udp4
      ip: 127.0.0.1
      port: 11416
bundles:
  - name: log
    id: 0x100
    producer: mcu
    consumer: pc
    signals:
      - {name: level, type: uint32}
      - {name: name, type: string, capacity: 64}
      - {name: msg, type: string, capacity: 64}
      - {name: file, type: string, capacity: 64}
      - {name: function, type: string, capacity: 64}
      - {name: line, type: uint32}
  - name: status
    id: 0x101
    producer: mcu
    consumer: pc
    signals:
      - {name: hardware_id, type: string, capacity: 10}
      - {name: firmware_version, type: string, capacity: 10}
      - {name: mcu_uptime_s, type: int32}
      - {name: mcu_uptime_ns, type: uint32}
      - {name: connection_uptime_s, type: int32}
      - {name: connection_uptime_ns, type: uint32}
  - name: power
    id: 0x102
    producer: mcu
    consumer: pc
    signals:
      - {name: measured_voltages, type: float, length: 13}
      - {name: measured_currents, type: float, length: 13}
  - name: emergency_stop
    id: 0x103
    producer: mcu
    consumer: pc
    signals:
      - {name: data, type: bool}
  - name: temperature
    id: 0x104
    producer: mcu
    consumer: pc
    signals:
      - {name: temperatures, type: float, length: 18}
  - name: stop_status
    id: 0x105
    producer: mcu
    consumer: pc
    signals:
      - {name: needs_reset, type: bool}
  - name: pinout_state
    id: 0x106
    producer: mcu
    consumer: pc
    signals:
      - {name: rails, type: bool, length: 1}
      - {name: inputs, type: bool, length: 7}
      - {name: outputs, type: bool, length: 7}
      - {name: output_periods, type: uint32, length: 7}
  - name: alerts
    id: 0x107
    producer: mcu
    consumer: pc
    signals:
      - {name: data, type: string, capacity: 86}
  - name: cmd_fans
    id: 0x200
    producer: pc
    consumer: mcu
    signals:
      - {name: fans, type: bytes, capacity: 8}
  - name: display_status
    id: 0x201
    producer: pc
    consumer: mcu
    signals:
      - {name: string1, type: string, capacity: 50}
      - {name: string2, type: string, capacity: 50}
  - name: cmd_lights
    id: 0x202
    producer: pc
    consumer: mcu
    signals:
      - {name: red, type: bytes, capacity: 4}
      - {name: green, type: bytes, capacity: 4}
      - {name: blue, type: bytes, capacity: 4}
  - name: battery
    id: 0x203
    producer: pc
    consumer: mcu
    signals:
      - {name: percentage, type: float}
  - name: pinout_command
    id: 0x204
    producer: pc
    consumer: mcu
    signals:
      - {name: rails, type: bool, length: 1}
      - {name: outputs, type: uint32, length: 7}
  - name: cmd_shutdown
    id: 0x300
    producer: pc
    consumer: mcu
  - name: clear_needs_reset
    id: 0x301
    producer: pc
    consumer: mcu

ros2:
  topics:
    - {topic: /rosout,                          message: rcl_interfaces/msg/Log,                    qos.profile: rosout,      bundle: log}
    - {topic: platform/mcu/status,              message: clearpath_platform_msgs/msg/Status,        qos.profile: sensor_data, bundle: status}
    - {topic: platform/mcu/status/power,        message: clearpath_platform_msgs/msg/Power,         qos.profile: sensor_data, bundle: power}
    - {topic: platform/mcu/status/stop,         message: clearpath_platform_msgs/msg/StopStatus,    qos.profile: sensor_data, bundle: stop_status}
    - {topic: platform/mcu/status/temperature,  message: clearpath_platform_msgs/msg/Temperature,   qos.profile: sensor_data, bundle: temperature}
    - {topic: platform/mcu/status/pinout,       message: clearpath_platform_msgs/msg/PinoutState,   qos.profile: sensor_data, bundle: pinout_state}
    - {topic: platform/mcu/status/alerts,       message: std_msgs/msg/String,                       qos.profile: sensor_data, bundle: alerts}
    - {topic: platform/display/status,          message: clearpath_platform_msgs/msg/DisplayStatus, qos.profile: sensor_data, bundle: display_status}
    - {topic: platform/emergency_stop,          message: std_msgs/msg/Bool,                         qos.profile: sensor_data, bundle: emergency_stop}
    - {topic: platform/bms/state,               message: sensor_msgs/msg/BatteryState,              qos.profile: sensor_data, bundle: battery}
    - {topic: platform/mcu/_cmd_fans,           message: clearpath_platform_msgs/msg/Fans,          qos.profile: sensor_data, bundle: cmd_fans}
    - {topic: platform/mcu/_cmd_lights,         message: clearpath_platform_msgs/msg/Lights,        qos.profile: sensor_data, bundle: cmd_lights}
    - {topic: platform/mcu/_cmd_pinout,         message: clearpath_platform_msgs/msg/PinoutCommand, qos.profile: sensor_data, bundle: pinout_command}
